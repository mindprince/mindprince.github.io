<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: logging | Rohit Agarwal's Notes]]></title>
  <link href="http://notes.mindprince.in/categories/logging/atom.xml" rel="self"/>
  <link href="http://notes.mindprince.in/"/>
  <updated>2014-01-04T13:47:39+05:30</updated>
  <id>http://notes.mindprince.in/</id>
  <author>
    <name><![CDATA[Rohit Agarwal]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Notes on Apache log4j]]></title>
    <link href="http://notes.mindprince.in/2014/01/04/notes-on-apache-log4j.html"/>
    <updated>2014-01-04T12:20:00+05:30</updated>
    <id>http://notes.mindprince.in/2014/01/04/notes-on-apache-log4j</id>
    <content type="html"><![CDATA[<p>Setup a working directory. All the following commands are run from this directory. All relative file locations are relative to this directory.
<code>
$ mkdir log-test
$ cd log-test
</code></p>

<p>Create a test java program.
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>com/mindprince/MyLogTest.java </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">mindprince</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kn">import</span> <span class="nn">org.apache.log4j.Logger</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyLogTest</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">MyLogTest</span><span class="o">.</span><span class="na">class</span><span class="o">);&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Enter main method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">FooBarBaz</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class='line'><span class="n">FooBarBaz</span><span class="o">.</span><span class="na">bar</span><span class="o">();</span>
</span><span class='line'><span class="n">FooBarBaz</span><span class="o">.</span><span class="na">baz</span><span class="o">();</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Exit main method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="o">}</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="kd">class</span> <span class="nc">FooBarBaz</span> <span class="o">{</span>
</span><span class='line'>  <span class="kd">static</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">FooBarBaz</span><span class="o">.</span><span class="na">class</span><span class="o">);&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">foo</span><span class="o">()</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Enter foo method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&quot;This is information from foo.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Exit foo method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">bar</span><span class="o">()</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Enter bar method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">&quot;This is a warning from bar.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Exit bar method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">baz</span><span class="o">()</span> <span class="o">{&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Enter baz method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;This error occurred in baz.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">LOG</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">&quot;Exit baz method.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Compile the program.
<code>
$ export CLASSPATH=$CLASSPATH:.:/path/to/log4j-1.2.17.jar
$ javac com/mindprince/MyLogTest.java
</code></p>

<p>Create a <code>log4j.properties</code> file in the current working directory (<code>log-test/</code>). Log4j will automatically pick this up as this directory is in the classpath.
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>log4j.properties </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='properties'><span class='line'><span class="err">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Root</span> <span class="err">logger</span> <span class="err">option&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.rootLogger</span><span class="o">=</span><span class="s">INFO, stdout&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Direct</span> <span class="err">log</span> <span class="err">messages</span> <span class="err">to</span> <span class="err">stdout&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.stdout</span><span class="o">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout.ConversionPattern</span><span class="o">=</span><span class="s">%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x &amp;ndash; %m%n</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>
$ java com.mindprince.MyLogTest
2013-12-12 14:41:52 [main] INFO  com.mindprince.FooBarBaz  - This is information from foo.
2013-12-12 14:41:52 [main] WARN  com.mindprince.FooBarBaz  - This is a warning from bar.
2013-12-12 14:41:52 [main] ERROR com.mindprince.FooBarBaz  - This error occurred in baz.
</code></p>

<p>Sometimes it is useful to see log4j&rsquo;s internal debug information.
<code>
$ java -Dlog4j.debug=true com.mindprince.MyLogTest
log4j: Trying to find [log4j.xml] using context classloader sun.misc.Launcher$AppClassLoader@1372a1a.
log4j: Trying to find [log4j.xml] using sun.misc.Launcher$AppClassLoader@1372a1a class loader.
log4j: Trying to find [log4j.xml] using ClassLoader.getSystemResource().
log4j: Trying to find [log4j.properties] using context classloader sun.misc.Launcher$AppClassLoader@1372a1a.
log4j: Using URL [file:/home/rohita/log-test/log4j.properties] for automatic log4j configuration.
log4j: Reading configuration from URL file:/home/rohita/log-test/log4j.properties
log4j: Parsing for [root] with value=[INFO, stdout].
log4j: Level token is [INFO].
log4j: Category root set to INFO
log4j: Parsing appender named "stdout".
log4j: Parsing layout options for "stdout".
log4j: Setting property [conversionPattern] to [%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x - %m%n].
log4j: End of parsing for "stdout".
log4j: Parsed "stdout" options.
log4j: Finished configuring.
2013-12-12 14:42:50 [main] INFO  com.mindprince.FooBarBaz  - This is information from foo.
2013-12-12 14:42:50 [main] WARN  com.mindprince.FooBarBaz  - This is a warning from bar.
2013-12-12 14:42:50 [main] ERROR com.mindprince.FooBarBaz  - This error occurred in baz.
</code></p>

<p>To log messages to a file instead of the console use the following properties:
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>/path/to/log4j-tofile.properties </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='properties'><span class='line'><span class="err">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Root</span> <span class="err">logger</span> <span class="err">option&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.rootLogger</span><span class="o">=</span><span class="s">DEBUG, file&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Direct</span> <span class="err">log</span> <span class="err">messages</span> <span class="err">to</span> <span class="err">a</span> <span class="err">log</span> <span class="err">file&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.file</span><span class="o">=</span><span class="s">org.apache.log4j.RollingFileAppender</span>
</span><span class='line'><span class="na">log4j.appender.file.File</span><span class="o">=</span><span class="s">/path/to/logging.log</span>
</span><span class='line'><span class="na">log4j.appender.file.MaxFileSize</span><span class="o">=</span><span class="s">1MB&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Keep</span> <span class="err">one</span> <span class="err">backup</span> <span class="err">file&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.file.MaxBackupIndex</span><span class="o">=</span><span class="s">1</span>
</span><span class='line'><span class="na">log4j.appender.file.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
</span><span class='line'><span class="na">log4j.appender.file.layout.ConversionPattern</span><span class="o">=</span><span class="s">%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x &amp;ndash; %m%n</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>You can manually specify the location of your log4j properties file using <code>-Dlog4j.configuration</code>
```
$ java -Dlog4j.configuration=file:/path/to/log4j-tofile.properties com.mindprince.MyLogTest</p>

<p>$ cat /path/to/logging.log</p>

<hr />

<p>2013-12-12 14:44:07 [main] DEBUG com.mindprince.MyLogTest  &ndash; Enter main method.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter foo method.
2013-12-12 14:44:07 [main] INFO  com.mindprince.FooBarBaz  &ndash; This is information from foo.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit foo method.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter bar method.
2013-12-12 14:44:07 [main] WARN  com.mindprince.FooBarBaz  &ndash; This is a warning from bar.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit bar method.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter baz method.
2013-12-12 14:44:07 [main] ERROR com.mindprince.FooBarBaz  &ndash; This error occurred in baz.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit baz method.
2013-12-12 14:44:07 [main] DEBUG com.mindprince.MyLogTest  &ndash; Exit main method.</p>

<hr />

<p>```</p>

<p>Sometimes it is useful to change the logging behaviour for particular classes:
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>/path/to/log4j-selective.properties </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='properties'><span class='line'><span class="err">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Root</span> <span class="err">logger</span> <span class="err">option&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.rootLogger</span><span class="o">=</span><span class="s">DEBUG, stdout&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Direct</span> <span class="err">log</span> <span class="err">messages</span> <span class="err">to</span> <span class="err">stdout&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.stdout</span><span class="o">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout.ConversionPattern</span><span class="o">=</span><span class="s">%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x &amp;ndash; %m%n&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Print</span> <span class="err">only</span> <span class="err">messages</span> <span class="err">of</span> <span class="err">level</span> <span class="err">WARN</span> <span class="err">or</span> <span class="err">above</span> <span class="err">for</span> <span class="err">FooBarBaz&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.logger.com.mindprince.FooBarBaz</span><span class="o">=</span><span class="s">WARN</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><code>
$ java -Dlog4j.configuration=file:/path/to/log4j-selective.properties com.mindprince.MyLogTest
2013-12-12 14:51:36 [main] DEBUG com.mindprince.MyLogTest  - Enter main method.
2013-12-12 14:51:36 [main] WARN  com.mindprince.FooBarBaz  - This is a warning from bar.
2013-12-12 14:51:36 [main] ERROR com.mindprince.FooBarBaz  - This error occurred in baz.
2013-12-12 14:51:36 [main] DEBUG com.mindprince.MyLogTest  - Exit main method.
</code></p>

<p>I usually log everything to a file but only log important messages to the console:
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>/path/to/log4j-both.properties </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='properties'><span class='line'><span class="err">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Root</span> <span class="err">logger</span> <span class="err">option&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.rootLogger</span><span class="o">=</span><span class="s">DEBUG, stdout, file&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Direct</span> <span class="err">log</span> <span class="err">messages</span> <span class="err">to</span> <span class="err">stdout&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.stdout</span><span class="o">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
</span><span class='line'><span class="na">log4j.appender.stdout.layout.ConversionPattern</span><span class="o">=</span><span class="s">%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x &amp;ndash; %m%n&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Print</span> <span class="err">only</span> <span class="err">messages</span> <span class="err">of</span> <span class="err">level</span> <span class="err">WARN</span> <span class="err">or</span> <span class="err">above</span> <span class="err">on</span> <span class="err">the</span> <span class="err">console.&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.stdout.Threshold</span><span class="o">=</span><span class="s">WARN&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="err">&lt;h1&gt;Direct</span> <span class="err">log</span> <span class="err">messages</span> <span class="err">to</span> <span class="err">a</span> <span class="err">log</span> <span class="err">file&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="na">&lt;p&gt;log4j.appender.file</span><span class="o">=</span><span class="s">org.apache.log4j.RollingFileAppender</span>
</span><span class='line'><span class="na">log4j.appender.file.File</span><span class="o">=</span><span class="s">/path/to/messages.log</span>
</span><span class='line'><span class="na">log4j.appender.file.MaxFileSize</span><span class="o">=</span><span class="s">1MB</span>
</span><span class='line'><span class="na">log4j.appender.file.MaxBackupIndex</span><span class="o">=</span><span class="s">1</span>
</span><span class='line'><span class="na">log4j.appender.file.layout</span><span class="o">=</span><span class="s">org.apache.log4j.PatternLayout</span>
</span><span class='line'><span class="na">log4j.appender.file.layout.ConversionPattern</span><span class="o">=</span><span class="s">%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p %c %x &amp;ndash; %m%n</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>```
$ java -Dlog4j.configuration=file:/path/to/log4j-both.properties com.mindprince.MyLogTest
2013-12-12 15:10:31 [main] WARN  com.mindprince.FooBarBaz  &ndash; This is a warning from bar.
2013-12-12 15:10:31 [main] ERROR com.mindprince.FooBarBaz  &ndash; This error occurred in baz.</p>

<p>$ cat /path/to/messages.log</p>

<hr />

<p>2013-12-12 15:10:31 [main] DEBUG com.mindprince.MyLogTest  &ndash; Enter main method.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter foo method.
2013-12-12 15:10:31 [main] INFO  com.mindprince.FooBarBaz  &ndash; This is information from foo.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit foo method.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter bar method.
2013-12-12 15:10:31 [main] WARN  com.mindprince.FooBarBaz  &ndash; This is a warning from bar.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit bar method.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Enter baz method.
2013-12-12 15:10:31 [main] ERROR com.mindprince.FooBarBaz  &ndash; This error occurred in baz.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.FooBarBaz  &ndash; Exit baz method.
2013-12-12 15:10:31 [main] DEBUG com.mindprince.MyLogTest  &ndash; Exit main method.</p>

<hr />

<p>```</p>
]]></content>
  </entry>
  
</feed>
